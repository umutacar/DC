## Basic Structure of this directory

* book.tex can be used to generate pdf by including the relevant
  chapter's *TeX* source.  The TeX source can be obtained from the DeX
  source by the script ./texify.py (see below)


* book-pandoc.tex can be used to generate an html or pdf via pandoc.
  The command is something like this

  pandoc -f latex --verbose --mathjax -s book-pandoc.tex > book.html

  --verbose can generate lots of warnings.  

  book.html can then be viewed in the browser.

  I expect thath this will be a good quick way to test how math will
  look on Diderot.  Math is rendered using mathjax, which doesn't have
  full latex compatibility.  It sometimes requires trial and error to
  get things look right but it is usually fine.

* Generating TeX from DeX using texify.

  The files book.tex and book-pandoc.tex should be edited to include
  the relevat TeX file (chapter).  ./texify.py is not a complete or
  thoroughly tested script.  The usual workflow has been to test by
  uploading to the website, though I believe we should do more local
  development because it is faster.  I therefore intend to develop
  texify.py further.


* Each directory is a chapter of the book

* A directory typically looks like this
topic/topic.dex: this is the main file
topic/media/: this directory contains images

## Basic structure of a DEX file

A DeX file is a tree of nested blocks, which are chapters, sections,
subsections, subsubsections, groups, and atoms.

Atoms include definitions, examples, costspec etc.  There are many of
these. 

A block can be as big or small as desired but are typically 1-3
paragraphs.  


\begin(chapter}[Chapter Title]
\label{ch:chapter_label}

Chapter Intro text

\begin{section}[Section Title]

\begin{subsection}[Subsection Title]

\begin{subsubsection}[Subsubsection Title]
\begin{atom=[gram, example, problem, exercise]}[atom title]

\end{atom}

\begin{group}
\begin{definition}[definition title]
\end{definition}
\begin{example}[Example title]
\end{example}
\end{group}
\end{subsubsection}

\end{subsection}

\end{section}


## Some rules of DeX

* Each chapter must have a label.

* Each block may have a label.  This can be sepecified right after the
  block heading.

* Labels must be unique within a book.  The system will reject the file
  otherwise.


* You can "parse" a .dex file by using the command
./parse topic/topic.dex


If there is a problem in the file, then there will likely be an error
but the error might not make much sense.  Because the structure is
simple though, it should be easy to figure out what the error is.  It
is helpful to remember that the DEX transpiler is very simple and does
not look beyond the basic blocks of the document.  Latex errors
usually will not be caught by the parser.  

The most common problem includes forgetting to close a block (e.g.,
\end{definition}).



