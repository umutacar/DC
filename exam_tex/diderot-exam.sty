%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% This package provides an implementation of Diderot
%% commands and  environments for PDF generation
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcounter{chapter}

\usepackage{environ}   % A better command for defining environments, used
                       % to drop contents when needed.

\usepackage{xparse}
\usepackage{xifthen}
\usepackage{graphicx}

\newenvironment{cluster}[1][0.0]{}{}
\newcommand{\chapter}[2][0.0]{}

\newcommand{\fin}[2][1]{%
\underline{\hspace{#1 em}}%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% BEGIN: DIDEROT COMMANDS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% For pdf/latex we only use hyperref[label][reference text]
%% format.  
\renewcommand{\href}[2]{
\hyperref[#1]{#2}
}

\newcommand{\lt}{\ensuremath <}
\newcommand{\gt}{\ensuremath >}

% For PDF, we delegate download and attach to href.
\newcommand{\download}[2]{\href{#2}{#1}}
\newcommand{\attach}[2]{\href{#2}{#1}}
\newcommand{\video}[2]{\href{#2}{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% END: DIDEROT COMMANDS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% BEGIN: Diderot Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% BEGIN: AMSMath Environments

\theoremstyle{definition}
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}

\newtheorem{definition}{Definition}[chapter]
\newtheorem{algorithm}[definition]{Algorithm}
\newtheorem{code}[definition]{Pseudo Code}
\newtheorem{costspec}[definition]{Cost Specification}
\newtheorem{datatype}[definition]{Data Type}
\newtheorem{datastr}[definition]{Data Structure}
\newtheorem{example}{Example}[chapter]
\newtheorem{syntax}[definition]{Syntax}


\theoremstyle{definition}
\newtheorem{exercise}{Exercise}[chapter]
% \newtheorem{problem}[exercise]{Problem}
% \newtheorem*{solution}{Solution}
\newtheorem*{task}{Task}

\newcounter{problem}[section]

\theoremstyle{remark}
\newtheorem*{assumption}{Assumption}
\newtheorem*{hint}{Hint}
\newtheorem*{important}{Important}
\newtheorem*{note}{Note}
\newtheorem*{remark}{Remark}
\newtheorem*{reminder}{Reminder}

%% END: AMSMath Environments

%% BEGIN: Diderot Environments

%% \NewDocumentEnvironment{algorithm}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Algorithm.}}
%% {\paragraph*{Algorithm [#1].}}
%% }
%% { 

%% }


%% \NewDocumentEnvironment{costspec}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Cost Specification.}}  
%% {\paragraph*{Cost Specification [#1].}}
%% }
%% { 
%% }

%% \NewDocumentEnvironment{datastr}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Data Structure}} 
%% {\paragraph*{Data Structure [#1].}} 
%% }
%% { 
%% }


%% \NewDocumentEnvironment{datatype}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Datatype.}} 
%% {\paragraph*{Datatype [#1].}} 
%% }
%% { 
%% }

%% \NewDocumentEnvironment{definition}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Definition.}}
%% {\paragraph*{Definition [#1].}}
%% }
%% { 
%% }

%% \NewDocumentEnvironment{example}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Example.}}
%% {\paragraph*{Example [#1].}}
%% }
%% { 
%% }

%% \NewDocumentEnvironment{exercise}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Exercise.}}
%% {\paragraph*{Exercise [#1].}}
%% }
%% { 
%% }


\NewDocumentEnvironment{flex}{o}
{
\IfNoValueTF{#1}
{\smallskip}
{
\hfill\break
\medskip 
\noindent
{\large \textbf{#1.}}}
}

{ 
\IfNoValueTF{#1}
{\smallskip}
{\medskip}
}

\NewDocumentEnvironment{gram}{o}
{
\IfNoValueTF{#1}
{}
{\paragraph*{#1.}}
}
{ 
}
%% \NewDocumentEnvironment{important}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Important.}}
%% {\paragraph*{Important [#1].}}
%% }
%% { 

%% }

%% \NewDocumentEnvironment{lemma}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Lemma.}}
%% {\paragraph*{Lemma [#1].}}
%% }
%% { 

%% }


%% \NewDocumentEnvironment{note}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Note.}}  
%% {\paragraph*{Note [#1].}}  
%% }
%% { 
%% }

\NewDocumentEnvironment{observe}{o}
{
\IfNoValueTF{#1}
{\paragraph*{Observation.}}
{\paragraph*{Observation [#1].}}
}
{ 
}

\NewDocumentEnvironment{preamble}{o}
{
\IfNoValueTF{#1}
%{\paragraph*{Preamble.}}  
{}
{\paragraph*{#1.}}  
}
{ 
}

\NewDocumentEnvironment{problem}{O{}O{}}
{
\refstepcounter{problem}
\ifthenelse{\isempty{#2}}
{\paragraph*{Problem \thesection.\theproblem.}}
{\paragraph*{Problem \thesection.\theproblem~[#2].}}
\ifthenelse{\isempty{#1}}
{}
{(#1 points)}
}
{ 

}

\NewDocumentEnvironment{proposition}{o}
{
\IfNoValueTF{#1}
{\paragraph*{Proposition.}}
{\paragraph*{Proposition [#1].}}

}
{ 

}


%% \NewDocumentEnvironment{remark}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Remark.}}
%% {\paragraph*{Remark [#1].}}
%% }
%% { 
%% }

%% \NewDocumentEnvironment{solution}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Solution.}}
%% {\paragraph*{Solution [#1].}}
%% }
%% { 

%% }

%% \NewDocumentEnvironment{syntax}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Syntax.}} 
%% {\paragraph*{Syntax [#1].}} 
%% }
%% { 

%% }

%% \NewDocumentEnvironment{theorem}{o}
%% {
%% \IfNoValueTF{#1}
%% {\paragraph*{Theorem.}}
%% {\paragraph*{Theorem [#1].}}
%% }
%% { 

%% }

\ifdefined\teachingnotes
\NewDocumentEnvironment{teachnote}{o}
{
%Drop \BODY
}
{
}
\else
\NewEnviron{teachnote}{}  % This drops body.
\fi
\ifdefined\teachingnotes
\NewDocumentEnvironment{teachask}{o}
{
%Drop \BODY
}
{
}
\else
\NewEnviron{teachask}{}  % This drops body.
\fi
%% END: Diderot Environments

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% END: Diderot Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
